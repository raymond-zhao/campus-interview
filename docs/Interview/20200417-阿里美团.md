# 前言

因为导师明确要求不准实习，再加上学长学姐也都是参加的秋招，所以春招实习生的事情就没上过心。从 2 月底就频繁看到腾讯，阿里及其他诸多名企的招聘信息，但是仍然不为所动，只顾着忙着自己的一些无关紧要的事情。

后来微信被一个阿里的学长私聊，劝我投简历，一直也没打算春招实习生的事，所以就婉言拒绝了。等到 4 月 5 号时学长又私聊问情况，当时也没有答应投简历，但是当天晚上同实验室的一个同学说第二天就是阿里的面试，群里多人讨论了一会儿，然后我也决定投份简历体验一下流程，去试试水。

4 月 7 号简历基本做完，发给学长，然后就收到了阿里的内推邮件确认信息。

4 月 8 号回老家待了一天，4 月 9 号开始使用 [GitHub 70K star - JavaGuide](https://snailclimb.gitee.io/javaguide/#/?id=java) 进行复习，同时每天还要上课，做导师给的一些杂活。就这样，去年 9 月份刚研一入学的我，在研一下的春天，因为疫情闲赋在家，开始了人生第一场工作面试的准备。

一直以为阿里会是秋招时的最后一面，没想到反而成为了人生首面。

# 阿里篇

## 素质测评 4月13号

在开始正式面试前，还要经过阿里的素质测评。素质测评包括四个部分，前三部分差不多每部分10题，每题的时间为60s，75s，90s不等。第一部分为语文阅读理解，给出一段一百多字的段落然后让选择理解正确的选项；第二部分为图表分析题，根据图表估算数据；第三部分为根据图片找规律，比如给一个九宫格，给出8张图片，问缺少的第九个可能会是什么样子。

第四部分为性格测试题，三个选项里选出认为最适合自己的以及最不适合的自己的，不限时间。

素质测评后分数过低(网传56分)貌似就与面试无缘了。

## 笔试 4月13号

一个小时的时间两道在线笔试编程题，在牛客网上做题，阿里的笔试题难度正如传闻中一样...

当时第一题是动物选举的问题，第二题没什么印象了，读完题以后感觉是个图的遍历问题。

总之是得了0分。

```markdown
小动物选举
在一个森林里有一群小动物，它们打算选举出一个动物首领。
已知每个小动物的编号分别为 0、1、2 ... n，它们的能力值依次为为从大到小
即 0 号小动物能力值最大，n 号小动物能力值最小。
已知在小动物中存在崇拜现象，但是小动物只会崇拜能力值比自己大的动物。
在投票的过程中，已知小动物要么投票给自己，要么不投票，或者投票的对象为它所崇拜的小动物的投票结果相同。
问每只小动物能够获得的最高票数为多少。

输入
第一行为一个数字 n ，表示动物园里小动物的个数
第二行为一个整数列，如 0 1 1 1 1 ... 表示每只小动物的崇拜意向

输出 n 行，代表每个小动物可能获得的最大投票数

示例
输入 
5
0 1 1 1 1

输出
5
1
1
1
1
```

花了没多长时间就写出了一个方法，然后运行的时候发现AC 10%，而且没有错误用例提示。然后又回去读题发现，这个输入数组存在循环依赖的问题，即 `[0, 1, 1, 2, 3, 4]`，这种情况的话，第 6 只小动物的投票结果为 `4` ，但它并不是直接投票给了4，而这个只是它崇拜的偶像投票，所以说根据 `4` 去找到 `4` 号小动物的投票结果，然后根据 `4` 号小动物的结果 `2` 去找 `2` 号的崇拜偶像，然后就这样一直找到某只小动物不投票，或者投票给自己为止。

就这样，时间滴答滴答地过去，修改原来的代码改不出来，时间也所剩无几，第二题甚至都没去看。

后来去看了一下之前的阿里笔试题，大部分都是动态规划或者回溯之类的，自己这 `LeetCode` **两数之和**级别还是暂时解决不了。

笔试以后跟内推人说自己完了，面试应该无望了。然后当晚将近11点收到面试官的电话，约定4.15号上午11点面试。

## 一面(48分钟) - 4月15号

一面的记录并没有在招聘网站上进行更新和登记，面试是电话面试的形式，没有视频。面试之后明白了，很多笔试 0 分的人也会被发起面试，但是这有点像  Java 对象回收的过程，必须经过两次标记才算是真正地被清除，除非在 `finalize()` 的时候重新挂上引用链，也就是通过了一面，才有可能存在下来，否则的话，那就只有被清除的命运了。

### 自我介绍

简单介绍一下你的在校学习情况，项目经历，会哪些技术等等。

### 项目介绍

选择一个你觉得不错的项目说说，你做了什么工作。

### 你的项目里为什么要用存储过程？

我：我觉得用不到存储过程啊，但是老师要我迁移过来...

面试官(对此有点不太满意)：老师要你完成的是迁移功能，而不是迁移架构，你应该多思考。

《阿里巴巴Java开发手册》

【强制】：禁止使用存储过程，存储过程难以调试和扩展，更没有移植性。

### 你项目里用了Redis，你具体是怎么用的呢？跟MySQL索引查询出的数据有关联吗？

### 你在迁移数据库的过程中做了哪些优化？

### 你作为负责人是怎么协调小组成员的？

### 你在使用Redis的过程中学到了什么？

提到了跳表，然后问了一下跳表的基本原理

### 哪个数据结构用到了跳表？跳表在什么情况下会突然多出一层索引？

比如我本来五层索引，然后突然变成了六层。我回答：可能是因为插入或者删除数据了。后来想到可能是因为插入节点的时候，插入层的节点的个数大于下一层结点个数的1/2.

### 说一下对红黑树的理解

说了一下基本概念，提到高度自平衡，提到时间复杂度为 $O(\lg n)$ 。

面试官问：“你为什么念 欧(大O记号) 呢？你们学校里算法老师教你们这么念的吗？”

我：“算法老师没教怎么念。自己在《算法导论》书里看到对它的数学定义是最坏情况下的运行时间上界。” 后来想补充 $\Theta, \Omega$ 也没补充。

### 红黑树相比跳表而言有什么好处？

如果这个问题反过来可以回答一点，正向没回答出来。

反向的话：跳表和红黑树具有相同的最坏时间复杂度，但是实现简单，插入删除节点方便，而红黑树在插入删除节点的时候可能会需要进行全局性的调整。

### 你对 Java里的哪一块比较熟悉呢？项目里用了哪些？你简历里写了集合框架，JVM&GC，以及多线程与并发

我：“项目里主要用的还是Map跟List，其他的内容都是自己阅读资料学习的。”

### 你说一下 `HashMap` 跟 `ConcurrentHashMap`的区别吧。

### `ConcurrentHashMap`是怎么实现线程安全的呢？

提到了JDK 1.7和1.8的区别，又让详细说一下Segment分段锁是怎么保证线程安全的。

### 说一下你对JVM的理解

说了一下包含类加载子系统、运行时数据区、以及执行引擎和类库

然后又把程序计数器、虚拟机栈，本地方法栈、堆、方法区详细解释了一遍，最后提了一下运行时常量池和直接内存。

### 说一下垃圾回收算法

标记-清除、复制、标记-整理

### CMS使用的是哪种垃圾回收算法？G1呢？

答：CMS使用的是标记-清除算法，(思考犹豫了十几秒) G1整体上标记-整理，局部上标记-复制。

### GC调优的过程

分析可能会产生GC的过程的时候被打断，说我没有明白他的意思，他的意思是具体在工作中应该怎么调优。面试以后想起来是查看日志，然后调整堆内存的分配。

[GC性能调优步骤-知乎](https://zhuanlan.zhihu.com/p/58897189)

1. **监控GC的状态**

使用各种JVM工具，查看当前日志，分析当前JVM参数设置，并且分析当前堆内存快照和gc日志，根据实际的各区域内存划分和GC执行时间，觉得是否进行优化。

2. **生成堆的dump文件**

通过JMX的MBean生成当前的Heap信息，大小为一个3G（整个堆的大小）的hprof文件，如果没有启动JMX可以通过Java的jmap命令来生成该文件。

3. **分析dump文件**

4. **分析结果，判断是否需要优化**

**注：如果满足下面的指标，则一般不需要进行GC：**

- Minor GC执行时间不到50ms；
- Minor GC执行不频繁，约10秒一次；
- Full GC执行时间不到1s；
- Full GC执行频率不算频繁，不低于10分钟1次；

5. **调整GC类型和内存分配**
6. **不断的分析和调整**

[美团技术团队-GC调优](https://tech.meituan.com/2017/12/29/jvm-optimize.html)

**动态年龄计算**：Hotspot遍历所有对象时，按照年龄从小到大对其所占用的大小进行累积，当累积的某个年龄大小超过了 survivor 区的一半时，取这个年龄和MaxTenuringThreshold中更小的一个值，作为新的晋升年龄阈值。

### 在学校的时候参加过什么比赛吗？

答：参加过一些数学竞赛，并且取得了一些名次。

问：为什么参加数学比赛而不是Java之类的编程比赛呢？

答：因为以前对计算机不太熟悉，直到大三才开始经常使用Java，而比赛主要是在大一大二，所以后来也就不了了之了。

### 你有什么想问我的吗？

问题1：“这是我人生中的第一场面试，我觉得我发挥的很不好。您能给我一点意见或者建议吗”

回答1：“就你的项目经历而言，在同龄人中还算是很丰富的...你们这些面试的学生都有一个特点，那就是都是为了面试而背题，实践太少。比如我刚才说的GC调优过程，应该去查看GC日志，分析内存是怎么移动变化的...另外你应该考虑你项目的扩展性问题，你们学校现在应该就是几万个学生，等到这样过了几年以后数据累积起来应该怎么处理？... 还要考虑项目如何进行优化。”

问题2：“如果我这次面试挂了的话，对秋招有多大影响？”

回答2："完全没有影响。我们招聘的重点在春招，但是秋招的HeadCount不确定，秋招是我们的补录。比如说我们春招招了100个人，但是后来有的人选择去了其他的公司，以及各种各样原因没有来我们这个部门，最后这又空出了几十个名额，然后这个名额就是秋招补录的。"

## 一面总结

问一个项目问了25分钟左右，感觉回答的不是很好，主要是因为项目时间久，忘得多，而且在开发的过程中并没有深刻去学习技术知识，只是为了去完成任务，现在也主要是为了面试而准备，也没有回头去看之前的项目。

## 一面之后

一面结束后下午5点紧接着面试了美团，明显感觉到美团面试的气氛比较轻松，问的也比阿里的面试官有所不同，阿里的面试官真的是死抠项目，问到最后无言以对。阿里的面试官48分钟里问项目问了25分钟，美团的一面总共35分钟。

当晚收到内推人的消息，说面试官对我的表现还是很满意的，但是笔试0分，需要补考，也就是又要做笔试编程题。我说我感觉我不行，本来这场面试就比预计的提前了差不多半年，而且首面就给了阿里，自己算法之类的题可以说是还处于 `LeetCode` 两数之和那个水平。

补考时间定在4月16日晚。在4月16号当天其实已经放弃的差不多了，看到《West World》 S3E5 更新了，追了剧。然后在LeetCode上看了一二十题 **数组简单篇** 的习题，晚上又看了会儿树的遍历。

晚上九点二十收到了阿里的在线测评邮件，点进去以后就开始了，两道题，对于一个在学校导师项目里做惯了增删改查的我来说，还是压力巨大。

测评平台在阿里伯乐在线测评平台，没看到编译的地方，背景是 Sublime Monaki 的页面。两道补考题，1个小时内做完。

### 题目1

公司有一位 $HR$ 和 $A,B$ 两位面试官，$HR$ 每隔 $1\sim10$ 秒会获得一份简历，直到获取简历总数量达到$100$份就不再获得。面试官一旦面试完就会从 $HR$ 那边获取简历，直到所有简历都面试反馈完成。面试官 $A$ 处理一份简历需要 $3$ 秒，$B$ 处理一份简历需要 $5$ 秒。$AB$ 面试官在处理完简历后需要给 $HR$ 反馈（随机通过或者不通过）。请编码模拟本系统。

### 题目2

给定字符串(合法字符只包括 `0,1,?` )，替换字符串中的通配符 `?` 为 `0` 或者 `1`，生成所有可能的字符串。

```java
示例
Input str = "1??0?101"
Output: 
10000101
10001101
10100101
10101101
11000101
11001101
11100101
11101101
```

最后挣扎了许久，还是没有完全做对。[事后又参考了一下](https://blog.csdn.net/weixin_41563161/article/details/105594686)。

```java
public class SixteenOfJune {

    private char[] sc;
    
    private List<String> res;

    public List<String> generateString(String s) {
        res = new ArrayList<>();
        sc = s.toCharArray();
        helper(0);
        return res;
    }

    private void helper(int index) {
        if (index == sc.length) {
            res.add(new String(sc)); 返回空字符串
            return;
        }
        if (sc[index] == '?') {
            sc[index] = '0';
            helper(index + 1);
            sc[index] = '1';
            helper(index + 1);
            sc[index] = '?';
        } else {
            helper(index + 1);
        }
    }

    public static void main(String[] args) {
        String s = "1??0?101";
        SixteenOfJune sixteenOfJune = new SixteenOfJune();
        sixteenOfJune.generateString(s).forEach(System.out::println);
    }

}
```

---

如果做出了题补考之后就是二面，但是我又栽在了这个地方，感觉有点可惜，同时也有些放松。

仓促准备了一周的时间，确实学到了不少东西，为秋招的准备工作有一定的指导作用，那就是首先要强化算法方面练习与学习，不管工作的时候到底能用到多少，但毕竟这就是算法笔试的敲门砖，即使其他方面复习的再充分还是进不了阿里的大门，这就是所谓的 **短板效应** 。

一面之前没说补考，一面之后说因为笔试0分要补考。一面之前官网招聘进度未更新，但是补考之后更新的倒是听课，引人注目的 `Rejected`。

> 以上所写内容仅代表个人经历，并且添加了个人推断与猜测的成分。并不代表阿里官方任何观点。

# 美团篇

4月8号官网自投的简历，4月9号笔试，五道题得了0分，因为准备的是Java问答题那种，进去以后看到题目浏览了一圈不想做，两个小时的笔试提前70分钟交卷去吃饭了。

点进邮件里的链接一看，Shit，又是牛客网编程页面。赶紧去搜了一下美团面试要不要手写代码，赶紧去回顾了一下DCL的单例模式，以及树的遍历... 幸好到最后没让在线撕代码。

## 一面(35分钟)  4月15号

### 自我介绍

### 项目介绍

### 了解UML图吗？你的这个项目有画UML图吗？

### 说一下用例图、时序图、类图应该用在哪个阶段？

### 你是怎么画时序图的？

### 死锁形成有哪些条件？

### 怎么预防死锁？

### 线程有哪些状态？

### 线程从哪些状态可以转化到阻塞状态，分别调用哪些方法？

### Object类里有哪些方法？

### GC分代有哪些？不同代的默认收集器？

### 说一下 MySQL 和 MyISAM 的区别

### 事务有哪些特性？

### MySQL的事务隔离级别

我：“详细地说了一遍，然后提到MySQL的默认隔离级别是 `REPEATABLE-READ` 使用 `MVCC` 防止了幻读。”

面试官又让解释了一下什么叫做**幻读**，然后我解释了一下。

面试官问：“那如果我用一个具有较小事务编号的事务往数据库里增加了数据呢？对于具有较大事务编号的看到不就是幻读吗？”

我回答：“确实是...” 然后就说了不太了解。

### 了解间隙锁吗？

我：“回答了 `Gap Lock` 的基本概念”，然后说：“我在有的资料里看到 `MySQL` 的 `InnoDB` 引擎是采用 `Next-Key Lock` 算法实现的，以此避免了幻读，但是《高性能MySQL》上说是使用 `MVCC` 实现的(其实这个时候已经明白面试官的用意了-引导我认识到 `MySQL` 是同时采用`MVCC` 和 `Next-Key Lock` 算法防止幻读的) 。”

面试官：“所以 `MySQL` 不是使用一种方式解决幻读的。”

### 说说二叉树、平衡二叉树、AVL树、红黑树、B-树、B+树的区别

### 说说你在项目中用AOP做了什么

我：“日志记录、权限管理、事务处理”

### 说说Spring的代理方式

面试官当时说的时候好像突然不知道该问有几种动态代理了...应该是设置问题。

我：“如果一个类实现了某个接口，那么 `Spring` 利用 `JDK Proxy` 创建一个其实现类的代理对象；如果一个类没有实现接口，那么使用 `Cglib` 从类加载文件中获取该类的字节码文件后进行修改创建它的一个子类作为代理对象。”

面试官：“你还知道其他的动态代理吗？”

我：“不知道了，只了解这两种。” 

面试后查到还有 `Javassist` : 一套字节码操作库，有两种使用方式，既可以有类似 `Cglib` 的用法，也可以根据字节码结构去动态生成类。

另有静态代理 ： `AspectJ` 静态织入

### 你有什么想要问我的吗？

问题1：“您可以对我这次的面试给个评价吗？”

回答1：“回答的还是挺好的，但是看你简历上的项目有点简单，最好做一个大一点的项目......”

问题2：“如果实习面试挂了的话，对秋招有影响吗？”

回答2：“没影响啊... ” 后边就不记得了，大概是说有大厂实习经历的话确实挺加分的，但是没有的话也没什么副作用。

# 反问环节

下面是收集的反问问题。

- 这是我人生中第一场工作面试，我觉得我表现的不是太好，您可以给我提一点意见或者建议吗？
- 无论我这次面试过不过，接下来都还是要继续学习，如果我有幸入职阿里，那我应该在入职前重点学习哪些内容？
- 您所在的部门对实习生的培训方式是什么样的？
- 有师兄师姐带我么？公司有没有一些系统的培训？
- 您所在的部门实习生通常都是做些什么工作？
- 您觉得您所在的这个部门在这个公司里的发展趋势是什么样的？

- 团队的一些技术栈和所承担的业务。
- 如果我有幸通过了实习面试，您希望在我在实习前重点学习哪些知识？
- 如果通过了未来的工作主要是做什么？
- 甚至可以问一些学习的方法。

