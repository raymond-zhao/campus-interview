# 作者：那场烟雨遗留下的晴天

链接：https://www.nowcoder.com/discuss/448311?type=2&channel=666&source_id=discuss_terminal_discuss_hot
来源：牛客网

> 作者在Gitee上有个800+star的博客系统，面试主要是围着博客展开的。



## 第一面

第一面我觉得应该是基础面，重点考察的是自己技术的广度和一些技术的掌握情况，一面小哥哥也没有深究于某个特定的点，面试时间大约1个小时。

### 自我介绍
### 怎么打算投递后台岗位的，没有考虑契合自己研究方向的工作
### 有了解过OAuth2.0么，说说你对OAuth2.0的理解

```markdown
- OAuth2.0是OAuth协议的新版本, OAuth的意思是Open Authorization, 也就是开放认证授权的意思. 我所了解到的OAuth2.0的主要应用都是用在众多App的第三方登录功能上. 比如QQ登录, 微博登录, 微信登录等.

- OAuth2.0认证流程中主要涉及四个对象:
  - Client: 第三方应用, 我们使用的QQ登录就可以认为是一个Client.
  - Resource Owner: 资源所有者, 也就是用户.
  - Authorization Server: 授权服务器, 即提供第三方登录服务的服务器. 
  - Resource Server: 资源服务器, 通常和授权服务器属于同一应用.

- 基本流程为:
  - 第三方应用请求用户授权, 获取用户的公开信息(比如username)
  - 用户同意授权, 返回一个凭证code.
  - 第三方应用通过验证凭证(code)向授权服务器请求授权.
  - 授权服务器验证凭证通过后, 同意授权, 返回一个资源访问的凭证(Access Token)
  - 第三方应用通过(Access Token)去向资源服务器请求相关资源.
  - 资源服务器验证(Access Token)通过后, 返回第三方应用请求的资源.
  
参考: https://zhuanlan.zhihu.com/p/20913727
```

### 蘑菇博客开发过程中，有了解或学习其它的开源框架么
### 蘑菇博客文章发布的流程是怎么样的，是多人博客系统么
### 对其它的一些博客框架有了解么，比如hexo

```markdown
Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。
```

### hexo和蘑菇博客相比有什么区别呢？蘑菇博客多了哪些功能和优势
### 看你蘑菇博客用到了RabbitMQ，那谈谈为什么引入RabbitMQ？

```markdown
首先MQ的作用主要作用有三个, 分别是异步处理，应用解耦，流量控制等。

- 异步处理
  - 写消息比写数据库快，类似Redis在内存中操作，一个操作成功后先返回给用户提示信息，让后台慢慢做。
- 应用解耦
  - 订单系统与库存系统
- 流量控制
 - 秒杀：大量请求进来时如果如果超过了处理能力, 则先写入队列中一部分, 之后后台再根据自己的能力慢慢处理, 避免机器宕机. 
```

### RabbitMQ和其它消息队列，比如ActiveMQ，RocketMQ，Kafka有什么区别

```markdown
https://github.com/doocs/advanced-java

https://juejin.im/post/5b32044ef265da59654c3027
```

### Redis在你博客项目中的使用，为什么引入Redis?

```markdown
- 1 缓存首页, 因为首页信息经常被访问, 访问量非常大, 而且有很少修改, 每次访问去查询数据库代价较大. 让数据库主要负责持久化工作.
  - 即时性、数据一致性要求不高的.
  - 访问量大且更新频率不高的.
- 2 实现分布式锁
```

### Redis中存储的是热门文章，是通过什么来得到的？这样做会有什么问题么？
### 有听过长尾效应么？你通过推荐字段设置的推荐等级，这样会让这些文章一直保持在较高的点击量，而且热度和点击量也不会随着时间而降低，有什么解决方案么？
### 我看到你有用到JustAuth这个登录授权？说说它会存在账号泄漏的问题么？
### 下面谈谈Redis，它会存在线程切换的问题么？

```markdown
- 线程切换的问题是什么？
 - 消耗系统资源
Redis6 增加了io多线程, 是存在线程切换的问题的. 但是Redis5之前的Redis是单线程的IO多路复用, 不存在线程切换的问题.
```

### 谈谈Redis单线程模型和IO多路复用

```markdown
Redis服务器是一个事件驱动程序, 程序器需要处理文件事件和时间事件两类事件.
```

### Redis的大Key的问题，如果有个Value的大小是2M，会有什么问题么？最大支持的Value大小是多少？

```markdown

```

### 谈谈Redis集群RedisCluster，以及主从复制原理？

```markdown

```

### 说说Redis中的哨兵，即RedisSentinel

```markdown
哨兵是 Redis 集群架构中非常重要的一个组件，主要有集群监控、消息通知、故障转移(需大部分哨兵同意)、配置中心四个功能。哨兵用于实现Redis的高可用, 本身也是分布式的。

哨兵的核心知识

- 哨兵至少需要 3 个实例，来保证自己的健壮性。
- 哨兵 + Redis 主从的部署架构，是不保证数据零丢失的，只能保证 Redis 集群的高可用性。
https://juejin.im/post/5b7d226a6fb9a01a1e01ff64
```

### 下面来聊聊Linux，你知道Linux怎么查看当前的负载情况么？

```shell
$ uptime # 获取主机运行时间和查询linux系统负载等信息
$ w # 和uptime差不多
$ top # 实时监控系统状态 
$ iostat -x 1 10 # 监控IO, -x表示显示所有参数信息, 1表示每秒监控一次, 10 表示工监控10次
$ vmstat # 获得有关进程、虚存、页面交换空间及CPU活动的信息
$ free -m # 查看系统内存的使用情况, -m参数表示按照兆字节展示
$ sar -n DEV 1 # 查看网络设备的吞吐率
$ mpstat -P ALL 1 # 显示每个CPU的占用情况, 如果CPU占用率特别高, 可能是单线程应用程序引起
$ dmesg | tail # 输出系统日志的最后10行
```

### 你还知道其它的一些Linux命令么？

```markdown
- cat 猫一眼, 可以合并文件
- head -n N 头几行
- tail -n N 尾几行
- more 较大文件, 分页显示, 提示文件显示百分比
- less  less 可以随意浏览文件, 而 more 仅能向前移动, 而且 less 在查看之前不会加载整个文件
- vi 
- vim
- open
- grep
- ps
- find
- chmod
- touch
- scp
- sed
- tar
- help
- man
- awk
- whatis, whereis
- cp, mv, ls, mkdir, rm, mv, pwd

https://www.runoob.com/linux/linux-command-manual.html
```

### cat、tail、vi、vim命令的区别，分别说一说？

```markdown
- cat 用于连接文件并打印到标准输出设备上, 从头部显示
- tail 从尾部开始显示
- vim是vi的升级版本, 在兼容vi所有指令的情况下, 额外提供了多级撤销, 语法加亮等.
```

### 如果Linux下需要打开或者查看大文件，你会怎么做？

```markdown
- 就跟所有操作大文件的方法一样: 分治
- vim默认加载整个文件, 但是可以按需取用, 使用less最好, 可以把命令直接加进去. 
```

### 下面聊聊HttpCode，你知道3XX状态码对应的是什么？

```markdown
3XX 重定向

这类状态码代表需要客户端采取进一步的操作才能完成请求。通常，这些状态码用来重定向，后续的请求地址(重定向目标)在本次响应的Location域中指明。

当且仅当后续的请求所使用的方法是GET或者HEAD时，用户浏览器才可以在没有用户介入的情况下自动提交所需要的后续请求。客户端应当自动监测无限循环重定向（例如：A→B→C→……→A或A→A），因为这会导致服务器和客户端大量不必要的资源消耗。按照HTTP/1.0版规范的建议，浏览器不应自动访问超过5次的重定向。

300 Multiple Choices
301 Moved Permanently
302 Found
303 See Other
304 Not Modified
305 Use Proxy
306 Switch Proxy
307 Temporary Redirect
308 Permanent Redirect

https://zh.wikipedia.org/wiki/HTTP%E7%8A%B6%E6%80%81%E7%A0%81#3xx%E9%87%8D%E5%AE%9A%E5%90%91
```

### 在谈谈你知道的其它一些状态码，4XX和5XX？

```markdown
4xx客户端错误
这类的状态码代表了客户端看起来可能发生了错误，妨碍了服务器的处理。

400 Bad Request
由于明显的客户端错误（例如，格式错误的请求语法，太大的大小，无效的请求消息或欺骗性路由请求），服务器不能或不会处理该请求。

401 Unauthorized
403 Forbidden
404 Not Found
405 Method Not Allowed(部分网页服务器不允许PUT,DELETE)
415 Unsupported Media Type
对于当前请求的方法和所请求的资源，请求中提交的互联网媒体类型并不是服务器中所支持的格式，因此请求被拒绝。例如，客户端将图像上传格式为svg，但服务器要求图像使用上传格式为jpg。
```

```markdown
5xx服务器错误
表示服务器无法完成明显有效的请求。这类状态码代表了服务器在处理请求的过程中有错误或者异常状态发生，也有可能是服务器意识到以当前的软硬件资源无法完成对请求的处理。除非这是一个HEAD请求，否则服务器应当包含一个解释当前错误状态以及这个状况是临时的还是永久的解释信息实体。浏览器应当向用户展示任何在当前响应中被包含的实体。这些状态码适用于任何响应方法。

500 Internal Server Error
通用错误消息，服务器遇到了一个未曾预料的状况，导致了它无法完成对请求的处理。没有给出具体错误信息.

502 Bad Gateway
作为网关或者代理工作的服务器尝试执行请求时，从上游服务器接收到无效的响应。

503 Service Unavailable
由于临时的服务器维护或者过载，服务器当前无法处理请求。这个状况是暂时的，并且将在一段时间以后恢复。

504 Gateway Timeout
作为网关或者代理工作的服务器尝试执行请求时，未能及时从上游服务器（URI标识出的服务器，例如HTTP、FTP、LDAP）或者辅助服务器（例如DNS）收到响应。
```

### 下面我们来做个题目吧？语言任意，选择喜欢的（ps：其实是[leetCode原题](https://leetcode-cn.com/problems/merge-intervals/)，没有做过类似的，想了几分钟没有思路，哭，想问问思路，然后说换一题吧，那就，事后想想还挺简单的，根据第一位排序一下就好了）

```markdown
给出一个区间的集合，请合并所有重叠的区间。

示例 1:

输入: [[1,3],[2,6],[8,10],[15,18]]
输出: [[1,6],[8,10],[15,18]]
解释: 区间 [1,3] 和 [2,6] 重叠, 将它们合并为 [1,6].
示例 2:

输入: [[1,4],[4,5]]
输出: [[1,5]]
解释: 区间 [1,4] 和 [4,5] 可被视为重叠区间。
```

```java
public int[][] merge(int[][] intervals) {
    // 先按照区间起始位置排序
    Arrays.sort(intervals, (v1, v2) -> v1[0] - v2[0]);
    int[][] res = new int[intervals.length][2];
    int idx = -1;
    for (int[] interval : intervals) {
        // 如果结果数组是空的，或者当前区间的起始位置 > 结果数组中最后区间的终止位置，
        // 则不合并，直接将当前区间加入结果数组。
        if (idx == -1 || intervals[0] > res[idx][1])
            res[++idx] = interval;
        else
             // 反之将当前区间合并至结果数组的最后区间
            res[idx][1] = Math.max(res[idx][1], interval[1]);
    }
    return Arrays.copyOf(res, idx + 1);
}
```

### 那就换个题目吧，看看下面这个题目，找数组出现次数最多的TOPN，回头听室友说，好像又是leetcode原题，泪目，算法能力太弱，没怎么刷题。

后面面试官给讲了一下思路。从数组长度向下遍历进行查找。

[347. 前 K 个高频元素](https://leetcode-cn.com/problems/top-k-frequent-elements/)

```markdown
给定一个非空的整数数组，返回其中出现频率前 k 高的元素。

示例 1:
输入: nums = [1,1,1,2,2,3], k = 2
输出: [1,2]

示例 2:
输入: nums = [1], k = 1
输出: [1]
```

```java
public int[] topKFrequent(int[] nums, int k) {
    if (nums == null || nums.length == 0 || k < 0) return new int[0];
    // 首先哈希表统计每个元素出现的频率
    Map<Integer, Integer> map = new HashMap<>();
    for (int num : nums)
        map.put(num, map.getOrDefault(num, 0) + 1);
    // 维护一个大小为 k 的小根堆
    Queue<Integer> heap = new PriorityQueue<>(Comparator.comparingInt(map::get));
    for (int key : map.keySet()) {
        heap.offer(key);
        if (heap.size() > k)
            heap.poll();
    }
    // 最后翻转小根堆, 输出前 k 个元素
    List<Integer> topK = new LinkedList<>();
    while (!heap.isEmpty())
        topK.add(heap.poll());
    Collections.reverse(topK);
    int[] res = new int[k];
    for (int i = 0; i < k; i++)
        res[i] = topK.get(i);
    return res;
}
```

```java
public List<Integer> topKFrequent(int[] nums, int k) {
    if (nums == null || nums.length == 0 || k < 0) return new int[0];
    // 首先哈希表统计每个元素出现的频率
    Map<Integer, Integer> map = new HashMap<>();
    for (int num : nums)
        map.put(num, map.getOrDefault(num, 0) + 1);
    // 桶排序
    // 将频率作为数组下标，对于出现频率不同的数字集合，存入对应的数组下标
    List<Integer>[] buckets = new ArrayList[nums.length + 1];
    for (int key : map.keySet()) {
        int i = map.get(key);
        if (buckets[i] == null)
            continue;
        buckets[i].add(key);
    }
    List<Integer> res = new ArrayList<>();
    for (int i = buckets.length - 1; i >= 0 && res.size() < k; i--) {
        if (buckets[i] == null)
            continue;
        res.addAll(buckets[i]);
    }
    return res;
}
```

### 反问环节，问了问面试的表现，被告知算法能力比较薄弱，以为就此凉凉。然后一面说这边可以让你进入下一环节，这边大概需要等5到10分钟左右。

## 第二面

二面考察的是技术深度面试，面试时间大约50分钟左右

### 自我介绍
### 博客已经开源了么，用的什么开源协议，博客的用户多么？
### 看你博客中用到了Solr和ElasticSearch，谈谈它们的原理，以及倒排索引？

```markdown

```

### 对于Solr或者ES里面用到的一些中文分词器有了解过么？

```markdown
- ik分词器
```

### 谈谈那些技术栈，你比较熟悉的是那些，mysql和redis？
### 聊聊MySQL的底层索引结构，InnoDB里面的B+Tree？
### BTree和B+Tree的区别
### 聊聊MySQL索引的发展过程？是一来就是B+Tree的么？从没有索引、hash、二叉排序树、AVL树、B树、B+树聊。
### 谈谈MySQL里面的事务，说说什么是事务？
### MySQL里面有那些事务级别，并且不同的事务级别会出现什么问题？
### 谈谈可重复读和幻读的区别？
### MySQL中如果使用like进行模糊匹配的时候，是否会使用索引？一定不会用么？（索引这块了解的太少了，二面结束后，回去恶补了一下）
### 谈谈Redis吧，在你项目中的具体使用？
### 谈谈Redis如何实现分布式锁？
### 蘑菇博客是否存在缓存不一致的情况，你是如何解决的？
### 谈谈Redis中缓存穿透的问题，以及解决的方法？
### 还有其它解决缓存穿透的方法么？布隆过滤器有了解过么？
### Redis中大面积的缓存失效，然后请求全部打到数据库，有什么解决方法？
### 如果出现一些热点数据，比如明星之间的新闻，造成大量的吃瓜用户涌入后台，但是服务器还没有缓存对应的数据，这样可能造成数据库宕机，如何避免这样的情况？
### 聊聊JVM的组成结构？
### 谈谈垃圾收集原理？以及垃圾收集算法
### 复制算法和标记整理算法？
### 为什么不在新生代使用标记整理算法？或者在老年代使用复制算法？
### 有了解过Volatile么？谈谈你对Volatile的理解
### Volatile如何保证可见性的？以及如何实现可见性的机制。
### 如果大量的使用Volatile存在什么问题？
### 谈谈操作系统的线程，以及它的状态
### 线程和进程的区别？
### 为什么要提出多线程应用，而不是多进程应用呢？
### Linux你平时都有用到什么命令呢？
### 如果我需要查看端口号或者进程号，你会使用什么命令？
### 谈谈你做的另外一个项目吧？稍微介绍一下
### 毕业时间是什么时候？现在面试的是实习岗位么？
### 反问环节：追问面试表现？告知Redis这块掌握的还可以，但是MySQL这块显得不足。问后续的安排。

## 第三面

应该是Leader面，面试时间大概50分钟

### 自我介绍
### 好奇一下，用码云的人应该不多吧，为什么没有用Github？
### 你英文水平怎么样？
### 聊聊开源项目吧？我看这项目已经有800多赞了，你在这开源项目主要做了什么工作？
### 我们找些点来聊聊吧？先从ES和Solr开始，你们这两个都有在用么？
### SQL的方式实现搜索，你是怎么做的呢？
### 使用like匹配的时候，会不会查询非常慢呢？
### ES和Solr的底层都用了lucene，谈谈你对lucene的理解？
### lucene里面也有用到分词器，比如一些新的词“新冠肺炎”，它能不能做到很好的划分呢？
### 除了人为的维护词库，来解决最新词语的分割，你还有知道其它什么更好的方法么？
### 你有了解过其它什么开源的分词库么？
### 谈谈字典树？
### Solr和ES底层都用了lucene，那他们两者有什么区别呢？
### Solr所谓的集群环境和ES所谓的分布式环境，它们之间有什么区别呢？
### 上面你有提到微服务，你有了解过微服务是个什么样的理念么？
### 你现在的微服务，也是打包成多个jar包，部署在一个服务器上，如果服务器出现问题了，也会造成服务不可用，有没有好的解决方法呢？
### 聊聊服务的注册与发现？
### 服务的注册和发现，其实依赖于一个注册中心的概念，会不会出现注册中心挂掉，而导致整个服务不可用，有没有什么好的解决方法呢？
### 有了解过Zookeeper整个的选举过程么？
### 谈谈Zookeeper的分布式一致性协议？
### 聊聊索引，我给你写个表，看看下面的查询语句，走了那些索引？

```mysql
createtable'tb'(
idint,
namevarchar(64),
statusint,
createtimetimestamp,
PRIMARYKEY(`id`)
)
--创建了三个普通索引
createindexindex_nameontable('name')
createindexindex_statusontable('status')
createindexindex_createtimeontable('createtime')
--给定SQL语句，判断下面查询会用到几个索引
select*fromtbwherestatus=1andname="zhangsan"
```

上述SQL用到了几个索引？分别是那几个？

有了解过InnoDB底层的索引结构么？

通过两个索引查询出来的结果，会进行什么要的操作？交集，并集？

如果你在MySQL中遇到一些慢查询，有什么解决方法么？

谈谈explain？执行的explain后，出现的那些字段，能够帮助我们呢？

我看你的博客里面，关于Redis还有好几篇文章，我们可以聊一聊你对Redis的理解？

为什么Redis能够保持这么高的并发响应？

有了解过IO多路复用技术是个什么样的原理

通过一个线程，同时连接多个线程不会存在多个线程切换么？（感觉进坑了。。）

当你通过jedis进行连接redis的时候，已经和一个进程连接了，redis还能够和其它的进程进行通信么？

Redis每秒能够处理处理十万请求，如果按照你上面说的，那说明它每次交互只在1/十万秒内完成？

有了解过Redis的源码么？

MySQL用了B+Tree，Redis中的SortSet内部用了跳跃表，他们之间有什么差别？为什么MySQL不用跳跃表，或者是Redis不用B+Tree呢？

感觉自己编码功底怎么样？那我们先聊聊操作系统的知识在给你一道题吧。在操作系统中，有高速缓存，主存，虚拟内存，外存，有知道它们之间有什么样的关系，以及它们的作用是啥？

对它们来说，肯定会存在一个问题，就是当我们的主存满了，或者虚存满了，那么需要存在一个换页操作，你知道有那些换页算法么？

我们来聊聊LRU？叫你手写一个LRU算法谈谈你的思路？

用链表的方式实现，时间复杂度是O(N)，有没有什么方式能够让它是O(1)的时间复杂度呢？

OK，思路还可以，那你手写一个LRU算法吧？（双向链表+Hash？）

反问环节：问了下组织架构，已经python和go在项目中的使用。然后问了下面试的表现，得：代码写的不算好吧，LRU写成这样我觉得是不太合适的。（心碎的声音，感觉到凉凉的气息...），结束后以为面试已经结束，后面在准备关页面的时候，面试官说等一下，还有同学和我聊？

## HR面

花10来分钟做个简单的沟通

### 自我介绍
### 考研的时候为什么选择的是这个学校呢？
### 回顾一下，上大学到现在这段时间内，让自己最有挫败感的事情是什么呢？
### 有那些方面需要在改进的么？
### 回顾一下，上大学到现在这段时间内，让自己最有成就感的是什么事情呢？
### 对毕业工作的地点是有什么想法？
### 校招也陆陆续续开始了，在面试流程中的公司还有那些么？
### 对于以后参加的工作，你主要会看重那些方面呢？
### 毕业时间？
### 同学这块，大家都有在投递字节这边的岗位么？
### 反问环节：关于面试结果，告知，这边只是做简单的了解，面试结果大约会在一周左右出来，到时候会有邮件或者电话通知。关于面试的结果，需要综合前面的几个面试官进行综合评测，才能决定是否录取。